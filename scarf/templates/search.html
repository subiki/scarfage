{% extends "layout.html" %}

{% block body %}

<div id="content">

{% if pd.results %}
<div id="search" class="col-md-12">
<div class="page-heading"><h3>Search Results for "{{pd.query}}"</h3></div>

{{ pd.num_results }} items found, showing {{ pd.limit }} results per page.<br>

<nav aria-label="Page navigation">
  <ul class="pagination">
    <li{% if pd.page == 1 %} class="disabled"{% endif %}>
      <a href="{% if pd.page != 1 %}/item/search?page={{pd.page - 1}}&limit={{pd.limit}}&query={{pd.query}}&sort={{pd.sort}}{% endif %}" aria-label="Previous">&laquo;</a>
    </li>

    {% for page in range(1, pd.num_pages + 1) %}
        <li{% if page == pd.page %} class="active"{% endif %}><a href="/item/search?page={{page}}&limit={{pd.limit}}&query={{pd.query}}&sort={{pd.sort}}">{{ page }}</a></li>
    {% endfor %}

    <li{% if not pd.page < pd.num_pages %} class="disabled"{% endif %}>
      <a href="{% if pd.page < pd.num_pages %}/item/search?page={{pd.page + 1}}&limit={{pd.limit}}&query={{pd.query}}&sort={{pd.sort}}{% endif %}" aria-label="Next">&raquo;</a>
    </li>
  </ul>
</nav>

{% for item in pd.results %}
{% if item == None %}
No results.
{%else%}
<div class="row bottom-buffer scarf-entry no-gutter">
   <h4><a href="/item/{{ item.uid }}">{{ item.name }}</a> 
   {% if pd.authuser is defined %}
    {% include 'itemstatusbox.html' %} 
   {% endif %}
   </h4>

   <div class="col-6">
   {% for image in item.images()[:1] %}
       <a href="/item/{{ item.uid }}" class="scarf"><img class="img-rounded col-md-12 no-gutter" src="{{pd.prefix}}/resize/500x200/{{ image.uid }}" alt="{{ image.tag }}"></a>
   {% endfor %}

  </div>
</div>
{% endif %}
{% endfor %}

<nav aria-label="Page navigation">
  <ul class="pagination">
    <li{% if pd.page == 1 %} class="disabled"{% endif %}>
      <a href="{% if pd.page != 1 %}/item/search?page={{pd.page - 1}}&limit={{pd.limit}}&query={{pd.query}}&sort={{pd.sort}}{% endif %}" aria-label="Previous">&laquo;</a>
    </li>

    {% for page in range(1, pd.num_pages + 1) %}
        <li{% if page == pd.page %} class="active"{% endif %}><a href="/item/search?page={{page}}&limit={{pd.limit}}&query={{pd.query}}&sort={{pd.sort}}">{{ page }}</a></li>
    {% endfor %}

    <li{% if not pd.page < pd.num_pages %} class="disabled"{% endif %}>
      <a href="{% if pd.page < pd.num_pages %}/item/search?page={{pd.page + 1}}&limit={{pd.limit}}&query={{pd.query}}&sort={{pd.sort}}{% endif %}" aria-label="Next">&raquo;</a>
    </li>
  </ul>
</nav>


</div>
{% endif %}
</div>

{% endblock %}
